const xhrequest=new XMLHttpRequest,method="GET",overrideMimeType="application/json",url="../player-stats.json",dataSource=JSON.parse(localStorage.getItem("dataSource"));var playerStats=document.getElementById("player__stats");function populateSelect(){xhrequest.onreadystatechange=function(){if(xhrequest.readyState===XMLHttpRequest.DONE&&200===xhrequest.status){const e=document.getElementById("sel"),t=JSON.parse(xhrequest.responseText);localStorage.setItem("dataSource",JSON.stringify(t));for(let a=0;a<t.players.length;a++)e.innerHTML=e.innerHTML+"<option value='"+t.players[a].player.id+"'>"+t.players[a].player.name.first+" "+t.players[a].player.name.last+"</option>"}},xhrequest.open(method,url,!0),xhrequest.send()}function statTextRename(){let e=document.getElementsByClassName("fwd_pass");for(var t=0;t<e.length;t++)e[t].firstElementChild.innerText="forward passes";let a=document.getElementsByClassName("goal_assist");for(t=0;t<a.length;t++)a[t].firstElementChild.innerText="Assists";let n=document.getElementsByClassName("mins_played");for(t=0;t<n.length;t++)n[t].firstElementChild.innerText="Minutes played";let s=document.getElementsByClassName("backward_pass");for(t=0;t<s.length;t++)s[t].firstElementChild.innerText="Backward passes"}function playerInfoFunc(e,t){var a=document.getElementById("player__name"),n=document.getElementById("player__pos"),s=document.getElementById("player__club"),l=document.getElementById("player__img");const r=dataSource.players[e].player;a.innerText=t.options[t.selectedIndex].text,n.innerText=r.info.positionInfo.split(" ").slice(-1);var o=r.currentTeam.name.replace(" ","-").toLowerCase();s.innerHTML="<span class='"+o+"'></span>",l.src="images/p"+t.value+".png",playerStats.innerHTML=""}function playerStatsFunc(e){const t=dataSource.players[e];for(let e=0;e<t.stats.length;e++){var a=t.stats[e].name.replace("_"," "),n=t.stats[e].value,s=document.createTextNode(a),l=document.createTextNode(n),r=document.createElement("li"),o=document.createElement("span"),p=document.createElement("span");r.appendChild(p),p.setAttribute("class","stat"),p.appendChild(s),r.appendChild(o),o.setAttribute("class","stat-figure"),o.appendChild(l),playerStats.appendChild(r).classList.add(t.stats[e].name),statTextRename()}}function show(e){for(let t=0;t<dataSource.players.length;t++)dataSource.players[t].player.id==e.value&&(document.getElementById("player-profile").classList.add("js-show"),playerInfoFunc(t,e),playerStatsFunc(t))}window.onload=populateSelect();